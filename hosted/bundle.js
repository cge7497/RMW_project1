(()=>{"use strict";const e=(e,t,o,h)=>{let l=1;h&&(l=-1),o.clearRect(0,0,640,480),o.save(),o.beginPath(),o.arc(e,t-3*l,3,0,2*Math.PI),o.moveTo(e,t),o.lineTo(e,t+5*l),o.lineTo(e-2*l,t+8*l),o.moveTo(e,t+5*l),o.lineTo(e+2*l,t+8*l),o.moveTo(e-3*l,t+3*l),o.lineTo(e+3*l,t+3*l),o.stroke(),o.closePath(),o.restore()},t=(e,t,o,h,l,n,i)=>{l.save(),l.beginPath(),l.moveTo(e,t),l.lineTo(e+o,t),l.lineTo(e+o,t+h),l.lineTo(e,t+h),l.closePath(),i?(l.fillStyle=n,l.fill()):(l.strokeStyle=n,l.lineWidth=3,l.stroke()),l.restore()};class o{constructor(e,t,o,h,l){this.x=e,this.y=t,this.width=o,this.height=h,this.color=l,this.hSpeed=h*o/15,this.vSpeed=0}}const h=[{x:280,y:800,width:31,height:30,color:"red"},{x:0,y:0,width:30,height:1e3,color:"blue"},{x:600,y:0,width:30,height:1e3,color:"green"},{x:0,y:600,width:1e3,height:30,color:"yellow"},{x:0,y:0,width:1e3,height:30,color:"lavender"}];let l,n,i,a=[];const d={x:300,y:300,halfWidth:4,halfHeight:7,newX:300,newY:300};let c,r,s,w,y,g,u=!1,x=[],v=0,f=0,m=0;const k=()=>{p(),e(d.x+f,d.y+m,n,u),((e,t,o,h)=>{t.fillRect(e.x+o-e.width/2,e.y+h-e.height/2,e.width,e.height,"blue")})(d,n,f,m),S()},p=()=>{let e=0,t=0;x[65]&&(e=-2),x[68]&&(e=2),t=u?-3:3,d.newX=d.x+e,d.newY=d.y+t;let o=X(d);0==o.length?(d.x+=e,d.y+=t,f-=e,m-=t):(o.forEach((o=>{M(d,o)&&(d.newY-=t,console.log("collided on bottom.")),C(d,o)&&(d.newX-=e,console.log("collided on left.")),W(d,o)&&(d.newY-=t,console.log("collided top.")),Y(d,o)&&(d.newX-=e,console.log("collided on the right!"))})),f+=d.x-d.newX,m+=d.y-d.newY,d.x=d.newX,d.y=d.newY)},S=()=>{h.forEach((e=>{t(e.x+f,e.y+m,e.width,e.height,n,e.color,!0)}))},b=()=>{i.clearRect(0,0,640,480),t(0,0,c,r,i,"white",!0),v+=0,a.forEach((function(e){e.hSpeed=1*Math.cos(v),e.vSpeed=1*Math.sin(v),e.x+=e.hSpeed,e.y+=e.vSpeed,e.x>c+20?e.x=-20:e.x<-20&&(e.x=c+20),e.y>r+20?e.y=-20:e.y<-20&&(e.y=r+20),t(e.x,e.y,e.width,e.height,i,e.color,!0)}))},T=()=>{},X=e=>{const t=[];return h.forEach((o=>{e.newX-e.halfWidth<o.x+o.width&&e.newX+e.halfWidth>o.x&&e.newY-e.halfHeight<o.y+o.height&&e.newY+e.halfHeight>o.y&&t.push(o)})),t},Y=(e,t)=>e.x+e.halfWidth<=t.x&&e.newX+e.halfWidth>=t.x,C=(e,t)=>e.x-e.halfWidth>=t.x+t.width&&e.newX-e.halfWidth<t.x+t.width,M=(e,t)=>e.y+e.halfHeight<t.y&&e.newY+e.halfHeight>=t.y,W=(e,t)=>e.y-e.halfHeight>=t.y+t.height&&e.newY-e.halfHeight<t.y+t.height,_=e=>{switch(e.keyCode){case 65:case 68:x[e.keyCode]=!0;break;case 32:e.preventDefault(),x[e.keyCode]||(u=!u),x[e.keyCode]=!0}},H=e=>{switch(e.keyCode){case 65:case 68:case 32:x[e.keyCode]=!1}};window.onload=()=>{s=new Audio("./sounds/blue_walker.wav"),s.volume=.25,w=new Audio("./sounds/red_walker.wav"),w.volume=.25,y=new Audio("./sounds/green_spawn.wav"),y.volume=.25,g=new Audio("./sounds/green_get.wav"),g.volume=.25;let t=document.querySelector("#canvas_player"),h=document.querySelector("#canvas_walkers"),u=document.querySelector("#canvas_bg");document.querySelector("#btn_reset").onclick=function(){location.reload()},l=h.getContext("2d"),n=t.getContext("2d"),i=u.getContext("2d"),c=h.width,r=h.height,document.addEventListener("keydown",_),document.addEventListener("keyup",H),e(300,300,n,!1);for(let e=0;e<10;e++)a.push(new o(640*Math.random(),480*Math.random(),10*Math.random()+30,4*Math.random()+3,"rgba(0,0,0,0.3)"));b(),l.fillStyle="black",d.x=d.y=300,setInterval(k,1e3/60),setInterval(b,1e3/15),setInterval(T,1e3),setInterval(drawOtherPlayerMovement,1e3/30)}})();